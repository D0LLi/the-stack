<!doctype HTML>
<meta charset='utf-8'>
<html>

<head>

  <script src='http://d3js.org/d3.v3.js' type='text/javascript'></script>
  <script src='http://timelyportfolio.github.io/rCharts_basketball/js/d3.tip.v0.6.3.js' type='text/javascript'></script>

  <style>
    .rChart {
      display: block;
      margin-left: auto;
      margin-right: auto;
      width: 800px;
      height: 400px;
    }

  </style>

</head>

<body>

  <div></div>
  <div id=chartPlayer1>
    <svg width="1440" height="900" viewBox="0 0 1440 900" fill="none" xmlns="http://www.w3.org/2000/svg"
      id="courtPlayer1">
      <svg width="860" height="900" viewBox="0 0 860 900" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect id="A" y="96.0589" width="860" height="707.972" />
        <path id="B"
          d="M323.432 804.652C323.432 790.478 326.224 776.443 331.648 763.348C337.072 750.252 345.023 738.354 355.045 728.331C365.068 718.308 376.966 710.358 390.062 704.934C403.157 699.51 417.192 696.718 431.367 696.718C445.541 696.718 459.576 699.51 472.671 704.934C485.767 710.358 497.665 718.308 507.688 728.331C517.711 738.354 525.661 750.252 531.085 763.348C536.509 776.443 539.301 790.478 539.301 804.653L431.367 804.652H323.432Z" />
        <path id="C"
          d="M113.276 196.301V96.0589H748.215C747.687 140.876 748.215 236.007 748.215 258.177C748.215 333.139 718.13 578.971 429.162 578.971C187.695 578.971 113.276 411.901 113.276 261.538V258.177V196.301Z" />
        <circle id="D" cx="430.438" cy="469.859" r="108.497" />
        <rect id="E" x="321.941" y="96.0589" width="216.994" height="373.274" />
        <path id="F"
          d="M321.941 469.791C321.941 455.649 324.746 441.646 330.195 428.58C335.644 415.515 343.631 403.644 353.7 393.644C363.769 383.644 375.722 375.712 388.878 370.3C402.033 364.888 416.133 362.102 430.373 362.102C444.612 362.102 458.712 364.888 471.868 370.3C485.023 375.712 496.976 383.644 507.045 393.644C517.114 403.644 525.101 415.515 530.55 428.58C535.999 441.646 538.804 455.649 538.804 469.791L430.373 469.791H321.941Z" />
        <path id="G"
          d="M538.935 95.9347C538.935 110.109 536.128 124.144 530.676 137.24C525.223 150.335 517.232 162.233 507.157 172.256C497.082 182.279 485.121 190.229 471.958 195.653C458.794 201.078 444.686 203.869 430.438 203.869C416.19 203.869 402.081 201.078 388.918 195.653C375.754 190.229 363.794 182.279 353.719 172.256C343.644 162.233 335.652 150.335 330.2 137.24C324.747 124.144 321.941 110.109 321.941 95.9347L430.438 95.9347H538.935Z" />
      </svg>
      <defs>
        <clipPath id="clip0">
          <rect width="1440" height="900" fill="white" />
        </clipPath>
      </defs>
    </svg>
  </div>

  <script>
    var params = {
      "dom": "chartPlayer1",
      "width": 1440,
      "height": 900,
      "data": {
        "region": ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T",
          "U", "V", "W"
        ],
        "pct": [0.19361, 0.57135, 0.30543, 0.14648, 0.046666, 0.71127, 0.74101, 0.78465, 0.062465, 0.050444, 0.60234,
          0.43274, 0.72817, 0.72738, 0.43075, 0.62668, 0.40689, 0.36524, 0.00315, 0.11036, 0.014926, 0.70929,
          0.21949
        ]
      },
      "y": "pct",
      "colors": ["rgba(92, 143, 242, 0.28)", "rgba(92, 143, 242, 0.36)", "rgba(92, 143, 242, 0.44)",
        "rgba(92, 143, 242, 0.52)",
        "rgba(92, 143, 242, 0.6)", "rgba(92, 143, 242, 0.68)",
        "rgba(92, 143, 242, 0.76)",
        "rgba(92, 143, 242, 0.84)", "rgba(92, 143, 242, 0.92)", "#5C8FF2"
      ],
      "id": "chartPlayer1"
    }
    var svg = d3.select("svg")
    tip = d3.tip().html(function (d) {
      return d.datum().key + ":" + d3.format(".2%")(d.datum().value);
    });

    /* Invoke the tip in the context of your visualization */
    svg.call(tip)

    //match the data with the regions
    svg.selectAll("path, rect, circle")[0].forEach(function (region) {
      //get the shape with d3
      var regionShape = d3.select(region)
      //look for the id of the shape in the data
      var dataid = d3.values(params.data.region).indexOf(regionShape.attr("id"))
      //if id is greater than 0 then we found the id in data
      //in this example we found a region
      if (dataid >= 0) {
        regionShape.datum({
            "key": regionShape.attr("id"),
            "value": params.data[params.y][dataid]
          })
          .attr("class", "regionData")
      }
    })

    var heatmapColor = d3.scale.linear()
      .domain(d3.range(0, 1, 1.0 / (params.colors.length - 1)))
      .range(params.colors);

    //redundant for now
    //but might need this in the future
    var colorScale = d3.scale.linear().domain([0, 1]).range([0, 1]);

    svg.selectAll(".regionData")
      .style("fill", function (d) {
        return heatmapColor(colorScale(d.value));
      })
      .style("fill-opacity", 0.6)
      .style("stroke", "black")
      .on("mouseover", function () {
        d3.select(this).style("stroke-width", 6)
        tip.show(d3.select(this))

      })
      .on("mouseout", function () {
        d3.select(this).style("stroke-width", 2)
        tip.hide(d3.select(this))
      })
      .on("click", showPopUp);

    function showPopUp() {
      alert("Clicked region " + this.id)
    }

  </script>
</body>

</html>

<script></script>
</body>

</html>
